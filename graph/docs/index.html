<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · ArbX.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://github.com/antematter/arbx/tree/master/graph/ArbX/index.html"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="ArbX.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">ArbX.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href="index.html">Home</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Contents"><span>Contents</span></a></li><li><a class="tocitem" href="#PairMultigraph"><span>PairMultigraph</span></a></li><li><a class="tocitem" href="#MetaDiGraph"><span>MetaDiGraph</span></a></li><li><a class="tocitem" href="#Appendix"><span>Appendix</span></a></li></ul></li><li><a class="tocitem" href="arbx.html">ArbX (Main)</a></li><li><a class="tocitem" href="types.html">Types</a></li><li><a class="tocitem" href="arbitrage.html">Arbitrage</a></li><li><a class="tocitem" href="datafeeds.html">DataFeeds</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="index.html">Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="index.html">Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/antematter/arbx/tree/master/graph/ArbX" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="ArbX"><a class="docs-heading-anchor" href="#ArbX">ArbX</a><a id="ArbX-1"></a><a class="docs-heading-anchor-permalink" href="#ArbX" title="Permalink"></a></h1><h1 id="Contents"><a class="docs-heading-anchor" href="#Contents">Contents</a><a id="Contents-1"></a><a class="docs-heading-anchor-permalink" href="#Contents" title="Permalink"></a></h1><ul><li><a href="arbx.html#ArbX-(Main)">ArbX (Main)</a></li><li><a href="types.html#Types">Types</a></li><li><a href="arbitrage.html#Arbitrage">Arbitrage</a></li><li><a href="datafeeds.html#DataFeeds">DataFeeds</a></li></ul><p>The graph module of <code>ArbX</code>. This is where the arbitrage detection algorithms reside. </p><p>Two graphs are maintained currently: <code>PairMultigraph</code> and <code>MetaDiGraph</code>. These graphs receive price updates from the <a href="@ref"><code>DataFeeds</code></a> module, which then launches threads to detect arbitrage opportunities in both graphs as described below. The arbitrages are written to a <code>HTTP.WebSocket</code> server on port <code>8084</code>, that listens for new client connections/subscriptions and then dumps the arbitrage in <code>JSON</code> format. For details on the format, check <a href="arbitrage.html#ArbX.Arbitrage.extractarb-Tuple{MetaDiGraph, Vector{&lt;:Integer}}"><code>Arbitrage.extractarb</code></a>.</p><h2 id="PairMultigraph"><a class="docs-heading-anchor" href="#PairMultigraph">PairMultigraph</a><a id="PairMultigraph-1"></a><a class="docs-heading-anchor-permalink" href="#PairMultigraph" title="Permalink"></a></h2><p>The <code>PairMultigraph</code> is a <a href="https://github.com/antematter/Multigraphs.jl"><code>WeightedDiMultigraph</code></a> with <a href="types.html#ArbX.Types.PriceData"><code>Types.PriceData</code></a> weights. The graph follows an adjacency list representation where each node (an <code>&lt;:Integer</code>) corresponds to a <code>Vector{&lt;:Integer}</code> that represents the connections. The weighted version of the <code>MultiDigraph</code>, <code>PairMultigraph</code>, also stores a <code>weights</code> vector that stores <code>PriceData</code> structs as weights. This representation is useful for quickly accessing all connections against a certain node. </p><p>The nodes represent tokens, provided externally, and the edges represent the bid and ask connections between them across markets. Two tokens can have multiple bid and ask connections for each market that they are traded on, e.g Orca and Serum. If the edge <code>n =&gt; m</code> is a bid, then <code>m =&gt; n</code> is necessarily ask; this similarly applies in case of multiple connections, in which case an invocation to <code>weights(graph, n, m)</code> will return a vector of <code>PriceData</code> each of which will have <code>side == bid</code>. </p><p>Ultimately, this helps in finding cross-market arbitrage opportunities quickly. If a price update is received on two tokens, <code>n</code> and <code>m</code>, then accessing the weights for each direction (<code>n =&gt; m</code> and <code>m =&gt; n</code>) returns the bids and asks respectively for the tokens across markets. If the maximum bid is higher than the minimum ask, then we have an opportunity where we can buy low and sell high. </p><h2 id="MetaDiGraph"><a class="docs-heading-anchor" href="#MetaDiGraph">MetaDiGraph</a><a id="MetaDiGraph-1"></a><a class="docs-heading-anchor-permalink" href="#MetaDiGraph" title="Permalink"></a></h2><p>For finding arbitrages that involve more than one trade/swap, we need a different data structure. <a href="https://github.com/JuliaGraphs/MetaGraphs.jl"><code>MetaDiGraph</code></a> provides the required versatility and performance. Summarily, the <code>Meta</code> in the name only means that meta data can be stored on any node or edge in the graph. Internally, the data is stored in <code>Dict</code> structures that provide fast access to data. </p><p>Unlike <code>PairMultigraph</code>, <code>MetaDiGraph</code> does not allow multiple connections between any two nodes. This restricts us to store only the best prices between two tokens – which is exactly what we want. Using <a href="arbitrage.html#ArbX.Arbitrage.bellman_ford_return_cycle-Union{Tuple{T}, Tuple{MetaDiGraph, T}} where T&lt;:Integer"><code>Arbitrage.bellman_ford_return_cycle</code></a> we can find negative-weight cycles in the graph, which simply put means you can trade/swap across the cycle and end up with a greater amount than what you started with. For more details, see <a href="arbitrage.html#ArbX.Arbitrage.calculate_profit_potential-Tuple{MetaDiGraph, Vector{&lt;:Integer}}"><code>Arbitrage.calculate_profit_potential</code></a>. </p><h2 id="Appendix"><a class="docs-heading-anchor" href="#Appendix">Appendix</a><a id="Appendix-1"></a><a class="docs-heading-anchor-permalink" href="#Appendix" title="Permalink"></a></h2><p>Refer to <a href="https://github.com/antematter/arbx/blob/master/graph/ArbX/src/publisher.jl"><code>publisher.jl</code></a> for launch details. </p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="arbx.html">ArbX (Main) »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Sunday 20 November 2022 20:47">Sunday 20 November 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
